---
import { Image } from "astro:assets";
import nverk from "../assets/nverk.webp";
import { SITE_TITLE } from "../consts";
import HeaderLink from "./HeaderLink.astro";
---

<header class="w-full bg-transparent">
  <div class="max-w-3xl mx-auto px-6 py-6 flex items-center justify-between">
    <h1 class="brand text-lg md:text-xl">
      <a class="inline-flex items-center gap-2 no-underline" href="/">
        <Image
          src={nverk}
          alt="portrait"
          width="32"
          height="32"
          class="rounded-full"
        />
        <span>{SITE_TITLE}</span>
      </a>
    </h1>

    <nav class="hidden md:flex items-center gap-6">
      <HeaderLink class="nav-link" href="/">Home</HeaderLink>
      <HeaderLink class="nav-link" href="/blog">Blog</HeaderLink>
      <HeaderLink class="nav-link" href="/about">About</HeaderLink>
    </nav>

    <!-- Mobile hamburger -->
    <div class="md:hidden">
      <button
        id="mobile-menu-toggle"
        aria-expanded="false"
        aria-controls="mobile-menu"
        class="p-2 rounded-md"
        title="Open menu"
      >
        <svg
          id="hamburger-open"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          aria-hidden
        >
          <path
            d="M4 7h16M4 12h16M4 17h16"
            stroke="var(--foreground)"
            stroke-width="1.6"
            stroke-linecap="round"></path>
        </svg>
        <svg
          id="hamburger-close"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          aria-hidden
          style="display:none;"
        >
          <path
            d="M6 6L18 18M6 18L18 6"
            stroke="var(--foreground)"
            stroke-width="1.6"
            stroke-linecap="round"></path>
        </svg>
      </button>
    </div>
  </div>

  <!-- Mobile nav overlay -->
  <div
    id="mobile-menu"
    class="fixed inset-0 z-40 hidden bg-background/80 backdrop-blur-sm"
  >
    <div class="max-w-md mx-auto mt-20 p-6">
      <nav class="flex flex-col gap-4">
        <HeaderLink href="/">Home</HeaderLink>
        <HeaderLink href="/blog">Blog</HeaderLink>
        <HeaderLink href="/about">About</HeaderLink>
      </nav>
    </div>
  </div>

  <script src="/js/mobile-menu.js" defer></script>
</header>
